(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{49:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(16),r=n.n(a),c=n(7),o=(n(49),n(18)),i=n(6),l=n(13),u=n.n(l),j=n(25),d=n(14),p=n(26),g=n.n(p),b="GET_MESSAGES",O="SEND_MESSAGE",m="CLEAR_MESSAGES",x="SET_ERROR",f="CLEAR_ERROR",h="SET_LOADING",v="SET_OPERATION",y=function(e,t){switch(console.log("state: ",e,", action: ",t),t.type){case b:return Object(c.a)(Object(c.a)({},e),{},{messages:t.payload,loading:!1});case O:return Object(c.a)(Object(c.a)({},e),{},{loading:!1});case m:return Object(c.a)(Object(c.a)({},e),{},{messages:t.payload,loading:!1});case x:return Object(c.a)(Object(c.a)({},e),{},{loading:!1,error:t.payload});case f:return Object(c.a)(Object(c.a)({},e),{},{error:null});case h:return Object(c.a)(Object(c.a)({},e),{},{loading:!0});case v:return Object(c.a)(Object(c.a)({},e),{},{operation:t.payload});default:return e}},E=Object(s.createContext)(),S=n(4),R="production";console.log("NODE_ENV: ",R);var C="http://localhost:4000/api/msg",T=window.SERVER_URL;console.log("REACT_APP_SERVER_URL: ",C),console.log("SERVER_URL: ",T);var k=T;console.log("Backend URL: ",k);var M=function(e){var t=Object(s.useReducer)(y,{messages:[],loading:!1,error:null,operation:"/messages"}),n=Object(d.a)(t,2),a=n[0],r=n[1],c=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Get messages.."),R(),e.prev=2,console.log("Get messages from ".concat(k)),e.next=6,g.a.get("".concat(k),{});case 6:t=e.sent,n=t.data,console.log(n),r({type:b,payload:n}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),console.error(e.t0.response),l(e.t0.response?e.t0.response.data.msg:e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Send message ",t),R(),e.prev=2,console.log("Send message to ".concat(k)),e.next=6,g.a.post("".concat(k),t,{headers:{"Content-Type":"application/json"}});case 6:n=e.sent,s=n.data,console.log(s),r({type:O,payload:s}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0),console.error(e.t0.response),l(e.t0.response?e.t0.response.data.msg:e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Clear messages... "),R(),e.prev=2,e.next=5,g.a.delete("".concat(k),{headers:{"Content-Type":"application/json"}});case 5:t=e.sent,n=t.data,console.log(n),r({type:m,payload:n}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),console.error(e.t0.response),l(e.t0.response?e.t0.response.data.msg:e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),l=function(e){r({type:x,payload:e}),setTimeout((function(){return p()}),5e3)},p=function(){r({type:f})},R=function(){r({type:h})};return Object(S.jsx)(E.Provider,{value:{messages:a.messages,loading:a.loading,error:a.error,operation:a.operation,getMessages:c,sendMessage:o,clearMessages:i,setOperation:function(e){r({type:v,payload:e})}},children:e.children})},_=n(17),w=function(e){var t=Object(s.useState)("/messages"),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(S.jsxs)(_.a,{variant:"tabs",defaultActiveKey:"/messages",activeKey:a,onSelect:function(e){console.log("select tab ",e),r(e)},children:[Object(S.jsx)(_.a.Item,{children:Object(S.jsx)(_.a.Link,{eventKey:"/messages",as:"div",children:Object(S.jsx)(o.b,{to:"/messages",children:"Messages"})})}),Object(S.jsx)(_.a.Item,{children:Object(S.jsx)(_.a.Link,{eventKey:"/send",as:"div",href:"/send",children:Object(S.jsx)(o.b,{to:"/send",children:"Send message"})})})]})},L=n(44),A=function(){var e=Object(s.useContext)(E).error;return e&&Object(S.jsx)(L.a,{variant:"danger",style:{marginTop:"50px"},children:e})},G=n(19),I=function(e){var t=e.info;return Object(S.jsxs)("div",{children:[t.date," - ",t.value]})},N=function(){var e=Object(s.useContext)(E),t=e.messages,n=e.getMessages,a=e.clearMessages,r=e.loading;return Object(s.useEffect)((function(){return n()}),[]),console.log("Messages are: ",t),r?Object(S.jsx)("div",{style:{marginTop:"50px"},children:"Loading messages..."}):Object(S.jsxs)("div",{style:{marginTop:"50px"},children:[Object(S.jsx)(G.a,{variant:"primary",onClick:function(e){return n()},children:"Refresh"})," ",Object(S.jsx)(G.a,{variant:"secondary",onClick:function(e){return a()},children:"Clear"})," ",Object(S.jsx)("div",{style:{marginTop:"30px"},children:t&&t.length?t.map((function(e){return Object(S.jsx)(I,{info:e},e.position)})):"No messages."})]})},D=n(21),K=function(){var e=Object(s.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(s.useContext)(E),c=r.loading,o=r.sendMessage;return c?Object(S.jsx)("div",{style:{marginTop:"50px"},children:"Sending message..."}):Object(S.jsxs)(D.a,{onSubmit:function(e){e.preventDefault(),o({message:n}),a("")},style:{marginTop:"50px"},children:[Object(S.jsxs)(D.a.Group,{controlId:"formBasicSendMessage",children:[Object(S.jsx)(D.a.Label,{children:"Message to send"}),Object(S.jsx)(D.a.Control,{type:"text",placeholder:"Enter a new message",name:"message",value:n,onChange:function(e){a(e.target.value)},htmlSize:"50",size:"sm",required:!0})]}),Object(S.jsx)(G.a,{variant:"primary",type:"submit",children:"Send"})]})};n(78);var P=function(e){return Object(S.jsx)(M,{children:Object(S.jsx)(o.a,{children:Object(S.jsxs)("div",{style:{margin:"50px"},children:[Object(S.jsx)(w,{}),Object(S.jsx)(A,{}),Object(S.jsxs)(i.d,{children:[Object(S.jsx)(i.b,{exact:!0,path:"/messages",render:function(e){return Object(S.jsx)(N,Object(c.a)({},e))}}),Object(S.jsx)(i.b,{exact:!0,path:"/send",render:function(e){return Object(S.jsx)(K,Object(c.a)({},e))}}),Object(S.jsx)(i.a,{to:"/messages"})]})]})})})},U=n(43),V=n.n(U);n(81);V.a.config(),console.log("Server: ","http://localhost:4000/api/msg"),r.a.render(Object(S.jsx)(P,{}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.5851d4d4.chunk.js.map